# System Architecture & Flow Diagrams

## 1. Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       EXAM RESULTS SYSTEM                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    exams
      â”‚
      â”‚ 1 --â†’ M exam_results
      â”‚
      â”œâ”€ id
      â”œâ”€ name (Mid-term 2024)
      â”œâ”€ exam_date
      â””â”€ status


    students                           class_rooms
      â”‚                                    â”‚
      â”‚ M â†â”€ 1                             â”‚ 1 â†â”€ M
      â”‚                                    â”‚
      â”œâ”€ id                           â”œâ”€ id
      â”œâ”€ student_name                 â”œâ”€ class_name
      â”œâ”€ class_room_id â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€ session_id
      â””â”€ student_code        â”‚        â””â”€ class_id
                              â”‚
                              â”‚ M â†â”€ 1
                              â”‚
                        class_subjects
                              â”‚
                              â”œâ”€ class_id â”€â”€â”€â”€â”
                              â”œâ”€ subject_id â”€â”€â”
                              â”‚               â”‚
                              â”‚               â”‚
    subjects                  â”‚               â”‚
      â”‚                       â”‚               â”‚
      â”‚ 1 â†â”€ M                â”‚               â”‚
      â”‚                       â””â”€ 1            â”‚
      â”œâ”€ id                       â”‚           â”‚
      â”œâ”€ subject_name        subjects    class_rooms
      â””â”€ code                â”‚           â”‚
                             1 â† M       1 â† M
                             â”‚
                    exam_results
                             â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                 â”‚                 â”‚
    exam_id â”€â”€â”€â”€â†’ exams   student_id â”€â†’ students
    subject_id â”€â”€â†’ subjects  class_id â”€â”€â†’ class_rooms
           â”‚
         Fields:
         - total_marks
         - obtained_marks
         - timestamps
         
         Unique Key:
         (student_id, subject_id, exam_id)
```

---

## 2. Form Flow

```
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   User Visits Form      â”‚
                        â”‚  /exam_result/create    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Display Initial Form  â”‚
                        â”‚  - Exam dropdown        â”‚
                        â”‚  - Class dropdown       â”‚
                        â”‚  - Student (hidden)     â”‚
                        â”‚  - Subjects (hidden)    â”‚
                        â”‚  - Submit (disabled)    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Selects Exam       â”‚
                        â”‚ (No action yet)         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Selects Class      â”‚
                        â”‚ (Triggers AJAX)         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  AJAX Request Fires    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚  GET /exam_result/ajax â”‚                  â”‚
      â”‚                 â”‚  /class-data/{id}      â”‚                  â”‚
      â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
      â”‚                                                              â”‚
      â”‚  Server Side:                                  Browser Side: â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
      â”‚  â”‚ ExamResultController    â”‚                 â”‚
      â”‚  â”‚ getClassData($classId)   â”‚                 â”‚
      â”‚  â”‚                         â”‚                 â”‚
      â”‚  â”‚ 1. Find class by ID     â”‚                 â”‚
      â”‚  â”‚ 2. Load students where  â”‚    Response:    â”‚
      â”‚  â”‚    class_room_id =      â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚  â”‚    $classId             â”‚   JSON with:    â”‚
      â”‚  â”‚ 3. Load subjects via    â”‚    students[]   â”‚
      â”‚  â”‚    ClassSubject join    â”‚    subjects[]   â”‚
      â”‚  â”‚ 4. Return JSON          â”‚                 â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
      â”‚                                               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ JavaScript Processes    â”‚
                        â”‚ Response:               â”‚
                        â”‚ 1. populateStudents()   â”‚
                        â”‚ 2. populateSubjects()   â”‚
                        â”‚ 3. Show hidden sections â”‚
                        â”‚ 4. Enable submit button â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Updated Form:         â”‚
                        â”‚  - Exam: selected âœ“     â”‚
                        â”‚  - Class: selected âœ“    â”‚
                        â”‚  - Student: visible â†“   â”‚
                        â”‚  - Subjects: visible    â”‚
                        â”‚    with inputs for each â”‚
                        â”‚  - Submit: enabled âœ“    â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Selects Student    â”‚
                        â”‚ (No server action)      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Fills Marks for    â”‚
                        â”‚ All Subjects in Table   â”‚
                        â”‚ - Total Marks each      â”‚
                        â”‚ - Obtained Marks each   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ User Clicks Submit      â”‚
                        â”‚ "Save All Results"      â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Client-Side Validation: â”‚
                        â”‚ - Exam selected? âœ“      â”‚
                        â”‚ - Class selected? âœ“     â”‚
                        â”‚ - Student selected? âœ“   â”‚
                        â”‚ - All marks filled? âœ“   â”‚
                        â”‚ - Obtained â‰¤ Total? âœ“   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â”œâ”€ Validation FAILS
                                     â”‚  â”‚
                                     â”‚  â””â”€â†’ Show alert, don't submit
                                     â”‚
                                     â”œâ”€ Validation PASSES
                                     â”‚  â”‚
                                     â”‚  â””â”€â†’ POST /exam_result
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Form Submitted          â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚                 â”‚ POST /exam_result       â”‚                  â”‚
      â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
      â”‚                                                              â”‚
      â”‚  Server Side:                                  Browser Side: â”‚
      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
      â”‚  â”‚ ExamResultController     â”‚                 â”‚
      â”‚  â”‚ store(Request $request)  â”‚                 â”‚
      â”‚  â”‚                          â”‚                 â”‚
      â”‚  â”‚ 1. Validate request data â”‚                 â”‚
      â”‚  â”‚ 2. For each subject:     â”‚                 â”‚
      â”‚  â”‚    a. Check if exists    â”‚    Response:    â”‚
      â”‚  â”‚    b. If not: create     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
      â”‚  â”‚    c. Increment counters â”‚   Redirect +    â”‚
      â”‚  â”‚ 3. Return redirect with  â”‚   Success Msg   â”‚
      â”‚  â”‚    $created & $skipped   â”‚                 â”‚
      â”‚  â”‚    counts                â”‚                 â”‚
      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
      â”‚                                                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Redirect to:            â”‚
                        â”‚ /exam_result (index)    â”‚
                        â”‚                         â”‚
                        â”‚ Show success message:   â”‚
                        â”‚ "Exam results recorded: â”‚
                        â”‚  X created, Y skipped"  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   Done! âœ“                â”‚
                        â”‚ User sees all entered   â”‚
                        â”‚ results in the list     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Data Transformation

```
User Input Form
â”‚
â”œâ”€ exam_id: 1
â”œâ”€ class_id: 3
â”œâ”€ student_id: 5
â””â”€ marks: array of subjects
   â”œâ”€ marks[1]:
   â”‚  â”œâ”€ subject_id: 1
   â”‚  â”œâ”€ total_marks: 100
   â”‚  â””â”€ obtained_marks: 85
   â”œâ”€ marks[2]:
   â”‚  â”œâ”€ subject_id: 2
   â”‚  â”œâ”€ total_marks: 50
   â”‚  â””â”€ obtained_marks: 42
   â””â”€ marks[3]:
      â”œâ”€ subject_id: 3
      â”œâ”€ total_marks: 75
      â””â”€ obtained_marks: 60
            â”‚
            â–¼
Controller Loop (foreach mark)
            â”‚
            â”œâ”€â†’ Record 1: exam_id:1, student_id:5, subject_id:1, class_id:3, total:100, obtained:85
            â”œâ”€â†’ Record 2: exam_id:1, student_id:5, subject_id:2, class_id:3, total:50, obtained:42
            â””â”€â†’ Record 3: exam_id:1, student_id:5, subject_id:3, class_id:3, total:75, obtained:60
            â”‚
            â–¼
Database exam_results table
            â”‚
            â”œâ”€ Row: id=1, exam_id=1, student_id=5, subject_id=1, class_id=3, total=100, obtained=85
            â”œâ”€ Row: id=2, exam_id=1, student_id=5, subject_id=2, class_id=3, total=50, obtained=42
            â””â”€ Row: id=3, exam_id=1, student_id=5, subject_id=3, class_id=3, total=75, obtained=60
```

---

## 4. Duplicate Prevention Logic

```
New Form Submission
â”‚
â”œâ”€ Exam: 1 (Mid-term 2024)
â”œâ”€ Student: 5 (Ahmed Ali)
â”œâ”€ Subjects: 1, 2, 3
â”‚
â–¼
For Subject 1:
â”œâ”€ Check: Does record exist?
â”‚  â””â”€ Query: WHERE student_id=5 AND subject_id=1 AND exam_id=1
â”‚     â”œâ”€ YES: Skip (increment $skipped)
â”‚     â””â”€ NO: Create new record (increment $created)
â”‚
For Subject 2:
â”œâ”€ Check: Does record exist?
â”‚  â””â”€ Query: WHERE student_id=5 AND subject_id=2 AND exam_id=1
â”‚     â”œâ”€ YES: Skip
â”‚     â””â”€ NO: Create new record
â”‚
For Subject 3:
â”œâ”€ Check: Does record exist?
â”‚  â””â”€ Query: WHERE student_id=5 AND subject_id=3 AND exam_id=1
â”‚     â”œâ”€ YES: Skip
â”‚     â””â”€ NO: Create new record
â”‚
â–¼
Return Result:
â”œâ”€ First submission: "3 created, 0 skipped"
â””â”€ Second submission: "0 created, 3 skipped (already exist)"
```

---

## 5. Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BROWSER CLIENT                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         create.blade.php (Blade Template)            â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ HTML Form & Selects                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - examSelect                                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - classSelect                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - studentSelect (hidden)                      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - subjectsSection (hidden)                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â””â”€ Table with dynamic rows                 â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚         JavaScript (In Blade)                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Functions:                                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - fetchClassData(classId)  â†’ AJAX call       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - populateStudents(data)   â†’ Build dropdown  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - populateSubjects(data)   â†’ Build table     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - Form validation listeners                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ - Submit handler with validation             â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â–²
                           â”‚
                      HTTP AJAX
                    (fetch API)
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SERVER (Laravel)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚       ExamResultController.php                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ create()                                      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Returns create.blade.php with data          â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ getClassData($classId) [AJAX ENDPOINT]       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Query students by class_id                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Query subjects via ClassSubject join        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Return JSON response                        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ store(Request $request)                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Validate array of marks                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ For each mark:                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    - Check if exists (prevent duplicate)      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    - Create ExamResult record                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Redirect with message                       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Models                                     â”‚   â”‚
â”‚  â”‚  - ExamResult (with relationships)                   â”‚   â”‚
â”‚  â”‚  - Student, Subject, ClassRoom, Exam                â”‚   â”‚
â”‚  â”‚  - ClassSubject (junction table)                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Database (MySQL)                           â”‚   â”‚
â”‚  â”‚  - exams, students, subjects, class_rooms           â”‚   â”‚
â”‚  â”‚  - class_subjects (junction)                        â”‚   â”‚
â”‚  â”‚  - exam_results (with unique constraint)            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Validation Pipeline

```
                     Form Submission
                            â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                               â”‚
            â–¼                               â–¼
   BROWSER VALIDATION            DOCUMENT READY
   (JavaScript)                  
            â”‚                               â”‚
     Checks:                        Listener on:
     â”œâ”€ Exam selected?             â”œâ”€ classSelect change
     â”œâ”€ Class selected?            â”œâ”€ Form submit
     â”œâ”€ Student selected?          â””â”€ Mark inputs
     â”œâ”€ All marks filled?
     â”œâ”€ Mark >= 0?
     â””â”€ Obtained â‰¤ Total?
            â”‚
     FAIL â”€â”€â”¼â”€â†’ Alert user, prevent submit
            â”‚
     PASS â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                             â”‚
            â–¼                             â–¼
      Form submits POST /exam_result
            â”‚
            â–¼
   SERVER VALIDATION (PHP)
   (Laravel Validation)
            â”‚
     Checks:
     â”œâ”€ exam_id exists? (exists:exams,id)
     â”œâ”€ class_id exists? (exists:class_rooms,id)
     â”œâ”€ student_id exists? (exists:students,id)
     â”œâ”€ marks array present?
     â”œâ”€ Each mark has required fields?
     â””â”€ numeric min:0 for all marks?
            â”‚
     FAIL â”€â”€â”¼â”€â†’ Redirect back with errors
            â”‚
     PASS â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                                 â”‚
            â–¼                                 â–¼
    DUPLICATE CHECK (PHP)        DATABASE CONSTRAINTS
    (Application Logic)          (SQL Level)
            â”‚                           â”‚
     For each mark:               UNIQUE KEY:
     â”œâ”€ Query: Does exist?        (student_id,
     â”‚  â””â”€ WHERE (stud, subj, exam) subject_id,
     â”œâ”€ If YES: Skip             exam_id)
     â””â”€ If NO: Create record
            â”‚
            â–¼
    Database INSERT
            â”‚
            â”œâ”€ SUCCESS â”€â”€â†’ Redirect with success message
            â”‚
            â””â”€ FAIL â”€â”€â”€â”€â†’ Redirect with error message
                        (caught by exception handler)
```

---

## 7. State Diagram

```
                        [FORM LOADED]
                             â”‚
                    exam_id = null
                    class_id = null
                    student_id = null
                    subjects = []
                             â”‚
                  User selects Exam
                             â”‚
                    exam_id = 1 âœ“
                    class_id = null
                    student_id = null
                    subjects = []
                             â”‚
                  User selects Class
                             â”‚
              â”Œâ”€ AJAX Request Fires â”€â”€â”
              â”‚                       â”‚
              â”‚    Server returns:    â”‚
              â”‚    students[] and     â”‚
              â”‚    subjects[]         â”‚
              â”‚                       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                â”‚
                  exam_id = 1 âœ“
                  class_id = 3 âœ“
                  student_id = null
                  subjects = [1,2,3] âœ“
                  Student section: VISIBLE
                  Subjects section: VISIBLE
                  Submit button: ENABLED
                                â”‚
                  User selects Student
                                â”‚
                  exam_id = 1 âœ“
                  class_id = 3 âœ“
                  student_id = 5 âœ“
                  subjects = [1,2,3] âœ“
                  Form READY TO SUBMIT
                                â”‚
                  User fills marks
                                â”‚
                  exam_id = 1 âœ“
                  class_id = 3 âœ“
                  student_id = 5 âœ“
                  subjects[1].total = 100 âœ“
                  subjects[1].obtained = 85 âœ“
                  subjects[2].total = 50 âœ“
                  subjects[2].obtained = 42 âœ“
                  subjects[3].total = 75 âœ“
                  subjects[3].obtained = 60 âœ“
                  All validation PASSES
                                â”‚
                  User clicks Submit
                                â”‚
                    POST submitted
                                â”‚
         Server validates & creates
              3 exam_result records
                                â”‚
              Redirect to index
              "3 created, 0 skipped"
                                â”‚
                         [SUCCESS]
```

This system is production-ready! ğŸ‰
